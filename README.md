# AutoSync 文件自动同步工具

AutoSync 是一个基于 Python 的文件自动同步工具，它能够实时监控指定目录的文件变化，并自动将变化同步到目标目录。

## 主要特性

- 🔄 实时监控：使用 `pyinotify` 实时监控文件系统变化
- 🚀 并行处理：使用多进程进行文件同步，提高处理速度
- 💾 智能缓存：使用 MD5 缓存机制，避免重复同步相同内容的文件
- 🎯 选择性同步：支持指定文件后缀进行同步
- 🔗 软链接支持：对于不在同步列表中的文件，创建软链接而不是复制
- 📊 进度显示：同步过程中实时显示进度
- 🌐 Web界面：提供友好的Web管理界面

## 安装要求

- Python 3.6+
- Flask
- pyinotify（Linux系统）
- watchdog（Windows/MacOS系统）

## 快速开始

1. 克隆仓库：
```bash
git clone https://github.com/WeimengLiu/autoSync.git
cd autoSync
```

2. 安装依赖：
```bash
pip install -r requirements.txt
```

3. 启动服务：
```bash
python app.py
```

4. 打开浏览器访问：`http://localhost:5001`

## 使用说明

### Web界面操作

1. 添加同步任务：
   - 点击"添加新任务"按钮
   - 填写任务名称、输入目录、输出目录和文件后缀
   - 点击"添加"按钮保存

2. 管理任务：
   - 启动/停止：点击对应按钮控制任务运行状态
   - 立即执行：手动触发一次全量同步
   - 查看日志：实时查看同步日志
   - 编辑/删除：修改任务配置或删除任务

### 文件同步规则

- 在同步列表中的文件后缀：直接复制文件
- 不在同步列表中的文件：创建软链接
- 删除文件：自动删除目标目录对应文件
- 删除目录：递归删除目标目录及其内容

## 配置说明

### 默认支持的文件类型

```
jpg, jpeg, png, gif, bmp, webp, ico, svg,
nfo, srt, ass, ssa, sub, idx, smi, ssa, SRT, sup
```

### 日志文件

- 位置：`logs/file_sync_任务ID_日期.log`
- 格式：时间 - 级别 - 消息

### 缓存文件

- 位置：`cache/sync_cache_*.json`
- 内容：文件MD5值和修改时间缓存

## 性能优化

1. 并行处理：
   - 使用多进程进行文件同步
   - 进程数默认为 CPU 核心数的2倍

2. 缓存机制：
   - 缓存文件MD5值避免重复计算
   - 使用文件修改时间快速判断文件是否变化

3. 选择性同步：
   - 只同步指定类型的文件
   - 其他文件使用软链接节省空间

## 贡献指南

欢迎提交 Issue 和 Pull Request。在提交 PR 之前，请确保：

1. 代码符合 PEP 8 规范
2. 添加了必要的测试
3. 更新了相关文档

## 许可证

本项目基于 MIT 许可证开源，详见 [LICENSE](LICENSE) 文件。 